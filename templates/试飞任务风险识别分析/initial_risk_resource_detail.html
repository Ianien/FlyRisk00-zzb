{% extends 'my_base.html' %}

{% block my_content %}
<div style="margin:20px 20px 20px 20px;font-size:20px;">
  <div class="mb-6 row">
    <label class="col-sm-12 col-form-label"  style="padding:15px 15px;">0.所属机型(   )。</label>
    <div class="form-check form-check-inline" id="check_box_0"  style="padding:15px 15px;">
        <input class="form-check-input" type="radio" name="inlineRadioOptions_0" id="inlineRadio0_1" value="AG600-1005" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio0_1">A. AG600-1005</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_0" id="inlineRadio0_2" value="AG600-1005" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio0_2">B. AG600-1005</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_0" id="inlineRadio0_3" value="..." style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio0_3">C. ......</label>
    </div>
  </div>
  <div class="mb-6 row">
    <label class="col-sm-12 col-form-label"  style="padding:15px 15px;">1.您所处的部门为(   )。</label>
    <div class="form-check form-check-inline" id="check_box"  style="padding:15px 15px;">
        <input class="form-check-input" type="radio" name="inlineRadioOptions_1" id="inlineRadio1_1" value="试飞设计" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio1_1">A. 试飞设计</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_1" id="inlineRadio1_2" value="改装" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio1_2">B. 改装</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_1" id="inlineRadio1_3" value="机务维修" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio1_3">C. 机务维修</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_1" id="inlineRadio1_4" value="场务保障" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio1_4">D. 场务保障</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_1" id="inlineRadio1_5" value="地面试验" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio1_5">E. 地面试验</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_1" id="inlineRadio1_6" value="试飞组织" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio1_6">F. 试飞组织</label>
    </div>
  </div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea1" class="form-label" style="padding:15px 15px;">2.您负责的流程的工作活动是怎样的？</label>
    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" style="margin:15px 15px;" disabled>{{data.question_new1}}</textarea>
  </div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea2" class="form-label"  style="padding:15px 15px;">3.请进行该工作活动的系统描述和工作分析</label>
    <textarea class="form-control" id="exampleFormControlTextarea2" rows="3" style="margin:15px 15px;" disabled>{{data.question_new2}}</textarea>
  </div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea3" class="form-label"  style="padding:15px 15px;">4.该活动中存在的危险源是什么？（仅限填写一个危险源）</label>
    <textarea class="form-control" id="exampleFormControlTextarea3" rows="3" style="margin:15px 15px;" disabled>{{data.risk_source}}</textarea>
  </div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea1" class="form-label" style="padding:15px 15px;">5.导致危险源的可能的人、设备、环境、管理的因素有哪些？（请尽可能详细地列出来，如果实在没有可填无）</label>
  </div>
  <div class="mb-3 row">
    <label class="col-sm-2 col-form-label" style="padding:0px 15px 15px 15px;">人的因素</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="yinsu1" placeholder="{{data.reason1}}" disabled>
    </div>
</div>
  <div class="mb-3 row">
    <label class="col-sm-2 col-form-label" style="padding:15px 15px;">设备因素</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="yinsu2" placeholder="{{data.reason2}}" disabled style="margin-top:15px;">
    </div>
</div>
  <div class="mb-3 row">
    <label class="col-sm-2 col-form-label" style="padding:15px 15px;">环境因素</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="yinsu3" placeholder="{{data.reason3}}" disabled style="margin-top:15px;">
    </div>
</div>
  <div class="mb-3 row">
    <label class="col-sm-2 col-form-label" style="padding:15px 15px;">管理因素</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="yinsu4" placeholder="{{data.reason4}}" disabled style="margin-top:15px;">
    </div>
</div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea4" class="form-label" style="padding:15px 15px;">6.该危险源可能导致哪些后果？</label>
    <textarea class="form-control" id="exampleFormControlTextarea4" rows="3" style="margin:15px 15px;" disabled>{{data.risk_source_result}}</textarea>
  </div>
  <div class="mb-6 row">
    <label class="col-sm-12 col-form-label"  style="padding:15px 15px;">7.该危险源发生的可能性有多高？</label>
    <div class="form-check form-check-inline" id="check_box_7"  style="padding:15px 15px;">
        <input class="form-check-input" type="radio" name="inlineRadioOptions_2" id="inlineRadio7_1" value="5" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio7_1">A. 5</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_2" id="inlineRadio7_2" value="4" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio7_2">B. 4</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_2" id="inlineRadio7_3" value="3" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio7_3">C. 3</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_2" id="inlineRadio7_4" value="2" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio7_4">D. 2</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_2" id="inlineRadio7_5" value="1" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio7_5">E. 1</label>
    </div>
  </div>
  <div class="mb-6 row">
    <label class="col-sm-12 col-form-label"  style="padding:15px 15px;">8.该危险源发生的严重性有多高？</label>
    <div class="form-check form-check-inline" id="check_box_8"  style="padding:15px 15px;">
        <input class="form-check-input" type="radio" name="inlineRadioOptions_3" id="inlineRadio8_1" value="A" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio8_1">A. A</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_3" id="inlineRadio8_2" value="B" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio8_2">B. B</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_3" id="inlineRadio8_3" value="C" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio8_3">C. C</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_3" id="inlineRadio8_4" value="D" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio8_4">D. D</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_3" id="inlineRadio8_5" value="E" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio8_5">E. E</label>
    </div>
</div>
  <div class="mb-6 row" style="padding:0px 25px 0 0;">
    <label style="padding:15px 15px;">9.该危险源发生的风险评分是（R=PxS）：</label>
    <div class="card" style="margin:0 25px 0 15px;">
      <div class="card-body">
        <div id="R_score">{{data.R_value}}</div>
      </div>
    </div>
  </div>
  <div class="mb-6 row" style="padding:0px 25px 0 0;">
    <label for="exampleFormControlTextarea1" class="form-label" style="padding:15px 15px;">10.该危险源发生的风险等级是：</label>
    <div class="card" style="margin:0 25px 0 15px;">
      <div class="card-body">
        <div id="R_level">{{data.risk_level}}</div>
      </div>
    </div>
    </div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea5" class="form-label" style="padding:15px 15px;">11.该危险源的控制措施是什么？</label>
    <textarea class="form-control" id="exampleFormControlTextarea5" rows="3" style="margin:15px 15px;" disabled>{{data.counter_measures}}</textarea>
  </div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea6" class="form-label" style="padding:15px 15px;">12.实行控制措施后，该危险源的剩余风险等级是多少？</label>
    <textarea class="form-control" id="exampleFormControlTextarea6" rows="3" style="margin:15px 15px;" disabled>{{data.left_risk_level}}</textarea>
  </div>
</div>


{% endblock %}


{% block my_script %}
<script>
    function submit_data(){
    var data = new Array();
    var obj = document.getElementsByName('inlineRadioOptions_0');
    for(i=0;i<obj.length;i++){
      if(obj[i].checked){
          data.push({check0:obj[i].value})
      }
    };
    var obj = document.getElementsByName('inlineRadioOptions_1');
    for(i=0;i<obj.length;i++){
      if(obj[i].checked){
          data.push({check1:obj[i].value})
      }
    };
    var obj = document.getElementsByName('inlineRadioOptions_2');
    for(i=0;i<obj.length;i++){
      if(obj[i].checked){
          data.push({check2:obj[i].value})
      }
    };
    var obj = document.getElementsByName('inlineRadioOptions_3');
    for(i=0;i<obj.length;i++){
      if(obj[i].checked){
          data.push({check3:obj[i].value})
      }
    };
    data.push({text1:$('#exampleFormControlTextarea1').val()});
    data.push({text2:$('#exampleFormControlTextarea2').val()});
    data.push({text3:$('#exampleFormControlTextarea3').val()});
    data.push({text4:$('#exampleFormControlTextarea4').val()});
    data.push({text5:$('#exampleFormControlTextarea5').val()});
    data.push({text6:$('#exampleFormControlTextarea6').val()});
    data.push({yinsu1:$('#yinsu1').val()});
    data.push({yinsu2:$('#yinsu2').val()});
    data.push({yinsu3:$('#yinsu3').val()});
    data.push({yinsu4:$('#yinsu4').val()});
    data.push({liucheng:'{{liucheng}}'});
    data.push({R_score:$('#R_score').text()});
    data.push({R_level:$('#R_level').text()});
    data.push({status:'提交'});
    data.push({id:'{{id}}'});
    console.log(data);
    data_post = {data:data};
        $.ajax({
                type:'POST',
                url:'/weixianyuan_initial/add/',
                data:JSON.stringify(data_post),
                contentType:'application/json',
                success:function (data) {
                    alert(data.msg);
                    },
                error:function () {alert("提交失败！")},
        });
    }

    function save_data(){
        var data = new Array();
        var obj = document.getElementsByName('inlineRadioOptions_0');
        for(i=0;i<obj.length;i++){
          if(obj[i].checked){
              data.push({check0:obj[i].value})
          }
        };
        var obj = document.getElementsByName('inlineRadioOptions_1');
        for(i=0;i<obj.length;i++){
          if(obj[i].checked){
              data.push({check1:obj[i].value})
          }
        };
        var obj = document.getElementsByName('inlineRadioOptions_2');
        for(i=0;i<obj.length;i++){
          if(obj[i].checked){
              data.push({check2:obj[i].value})
          }
        };
        var obj = document.getElementsByName('inlineRadioOptions_3');
        for(i=0;i<obj.length;i++){
          if(obj[i].checked){
              data.push({check3:obj[i].value})
          }
        };
        data.push({text1:$('#exampleFormControlTextarea1').val()});
        data.push({text2:$('#exampleFormControlTextarea2').val()});
        data.push({text3:$('#exampleFormControlTextarea3').val()});
        data.push({text4:$('#exampleFormControlTextarea4').val()});
        data.push({text5:$('#exampleFormControlTextarea5').val()});
        data.push({text6:$('#exampleFormControlTextarea6').val()});
        data.push({yinsu1:$('#yinsu1').val()});
        data.push({yinsu2:$('#yinsu2').val()});
        data.push({yinsu3:$('#yinsu3').val()});
        data.push({yinsu4:$('#yinsu4').val()});
        data.push({text3:$('#exampleFormControlTextarea3').val()});
        data.push({liucheng:'{{liucheng}}'});
        data.push({R_score:$('#R_score').text()});
        data.push({R_level:$('#R_level').text()});
        data.push({status:'保存'});
        data.push({id:'{{id}}'});
        console.log(data);
        data_post = {data:data};
            $.ajax({
                    type:'POST',
                    url:'/weixianyuan_initial/add/',
                    data:JSON.stringify(data_post),
                    contentType:'application/json',
                    success:function (data) {
                        alert(data.msg);
                        },
                    error:function () {alert("提交失败！")},
            });
    }
</script>
<script>
document.getElementById("check_box_7").addEventListener("click", function(e) {
    document.getElementById("check_box_8").addEventListener("click", function(f) {
        if (e.target.tagName == "INPUT") {
            if (f.target.tagName == "INPUT") {
                var choose1 = '';
                var choose2 = '';
                var obj = document.getElementsByName('inlineRadioOptions_2');
                for(i=0;i<obj.length;i++){if(obj[i].checked){ choose1 = obj[i].value}};
                var obj = document.getElementsByName('inlineRadioOptions_3');
                for(i=0;i<obj.length;i++){if(obj[i].checked){ choose2 = obj[i].value}};
                $('#R_score').text(choose1+choose2);
                if(choose1=='1'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='B'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='C'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='D'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='E'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='B'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='C'){$('#R_level').text('中');};
                if(choose1=='2'&&choose2=='D'){$('#R_level').text('中');};
                if(choose1=='2'&&choose2=='E'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='3'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='C'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='D'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='E'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='4'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='4'&&choose2=='C'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='D'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='E'){$('#R_level').text('高');};
                if(choose1=='5'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='5'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='5'&&choose2=='C'){$('#R_level').text('高');};
                if(choose1=='5'&&choose2=='D'){$('#R_level').text('避免');};
                if(choose1=='5'&&choose2=='E'){$('#R_level').text('避免');};
            }
        }
    })
})
document.getElementById("check_box_8").addEventListener("click", function(e) {
    document.getElementById("check_box_7").addEventListener("click", function(f) {
        if (e.target.tagName == "INPUT") {
            if (f.target.tagName == "INPUT") {
                var choose1 = '';
                var choose2 = '';
                var obj = document.getElementsByName('inlineRadioOptions_2');
                for(i=0;i<obj.length;i++){if(obj[i].checked){ choose1 = obj[i].value}};
                var obj = document.getElementsByName('inlineRadioOptions_3');
                for(i=0;i<obj.length;i++){if(obj[i].checked){ choose2 = obj[i].value}};
                $('#R_score').text(choose1+choose2);
                if(choose1=='1'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='B'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='C'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='D'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='E'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='B'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='C'){$('#R_level').text('中');};
                if(choose1=='2'&&choose2=='D'){$('#R_level').text('中');};
                if(choose1=='2'&&choose2=='E'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='3'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='C'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='D'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='E'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='4'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='4'&&choose2=='C'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='D'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='E'){$('#R_level').text('高');};
                if(choose1=='5'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='5'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='5'&&choose2=='C'){$('#R_level').text('高');};
                if(choose1=='5'&&choose2=='D'){$('#R_level').text('避免');};
                if(choose1=='5'&&choose2=='E'){$('#R_level').text('避免');};
            }
        }
    })
})
</script>
<script>
    var obj = document.getElementsByName('inlineRadioOptions_0');
    for(i=0;i<obj.length;i++){
        if(obj[i].value=='{{data.plane_type}}'){
            obj[i].checked='True';
        };
        obj[i].disabled='True';
    };
    var obj = document.getElementsByName('inlineRadioOptions_1');
    for(i=0;i<obj.length;i++){
        if(obj[i].value=='{{data.department}}'){
            obj[i].checked='True';
        };
        obj[i].disabled='True';
    };
    var obj = document.getElementsByName('inlineRadioOptions_2');
    for(i=0;i<obj.length;i++){
        if(obj[i].value=='{{data.probability}}'){
            obj[i].checked='True';
        };
        obj[i].disabled='True';
    };
    var obj = document.getElementsByName('inlineRadioOptions_3');
    for(i=0;i<obj.length;i++){
        if(obj[i].value=='{{data.seriousness}}'){
            obj[i].checked='True';
        };
        obj[i].disabled='True';
    };
</script>
{% endblock %}