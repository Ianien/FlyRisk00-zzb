{% extends 'my_base.html' %}

{% block my_content %}
<div style="margin:20px 20px 20px 20px;font-size:20px;">
  <div class="mb-6 row">
    <label class="col-sm-12 col-form-label"  style="padding:15px 15px;">0.所属机型(   )。</label>
    <div class="form-check form-check-inline" id="check_box_0"  style="padding:15px 15px;">
        <input class="form-check-input" type="radio" name="inlineRadioOptions_0" id="inlineRadio0_1" value="AG600-1005" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio0_1">A. AG600-1005</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_0" id="inlineRadio0_2" value="AG600-1005" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio0_2">B. AG600-1005</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_0" id="inlineRadio0_3" value="..." style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio0_3">C. ......</label>
    </div>
  </div>

  <div class="mb-3 row">
    <label for="exampleFormControlTextarea1" class="form-label" style="padding:15px 15px;">1.您觉得该科目可能存在什么危害？(限填1个)</label>
    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" style="margin:15px 15px;" disabled>{{data.harm_name}}</textarea>
  </div>
  <div class="mb-6 row">
    <label class="col-sm-12 col-form-label"  style="padding:15px 15px;">2.您觉得该危害发生的可能性有多高？</label>
    <div class="form-check form-check-inline" id="check_box_7"  style="padding:15px 15px;">
        <input class="form-check-input" type="radio" name="inlineRadioOptions_2" id="inlineRadio2_1" value="5" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio2_1">A. 5</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_2" id="inlineRadio2_2" value="4" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio2_2">B. 4</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_2" id="inlineRadio2_3" value="3" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio2_3">C. 3</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_2" id="inlineRadio2_4" value="2" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio2_4">D. 2</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_2" id="inlineRadio2_5" value="1" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio2_5">E. 1</label>
    </div>
</div>
  <div class="mb-6 row">
    <label class="col-sm-12 col-form-label"  style="padding:15px 15px;">3.该危害发生的严重程度有多高？</label>
    <div class="form-check form-check-inline" id="check_box_8"  style="padding:15px 15px;">
        <input class="form-check-input" type="radio" name="inlineRadioOptions_3" id="inlineRadio3_1" value="A" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio3_1">A. A</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_3" id="inlineRadio3_2" value="B" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio3_2">B. B</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_3" id="inlineRadio3_3" value="C" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio3_3">C. C</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_3" id="inlineRadio3_4" value="D" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio3_4">D. D</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_3" id="inlineRadio3_5" value="E" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio3_5">E. E</label>
    </div>
</div>
  <div class="mb-6 row" style="padding:0px 25px 0 0;">
    <label style="padding:15px 15px;">4.该危害发生的危害评分是（R=PxS）：</label>
    <div class="card" style="margin:0 25px 0 15px;">
      <div class="card-body">
        <div id="R_value" disabled>{{data.R_value}}</div>
      </div>
    </div>
  </div>
  <div class="mb-6 row" style="padding:0px 25px 0 0;">
    <label style="padding:15px 15px;">5.该危害发生的危害等级为：</label>
    <div class="card" style="margin:0 25px 0 15px;">
      <div class="card-body">
        <div id="harm_level" disabled>{{data.harm_level}}</div>
      </div>
    </div>
  </div>

<!--  <div class="mb-3 row">-->
<!--    <label for="exampleFormControlTextarea1" class="form-label"  style="padding:15px 15px 0px 15px;margin-bottom:0px;">5.导致该危害的原因可能是什么？</label>-->
<!--  </div>-->
<!--  <div class="mb-3 row">-->
<!--    <div id="test7" class="demo-transfer" style="margin:15px 15px;"></div>-->
<!--  </div>-->
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea1" class="form-label"style="padding:15px 15px;">6.该危害可能导致哪些后果？</label>
    <textarea class="form-control" id="exampleFormControlTextarea2" rows="3" style="margin:15px 15px;" disabled>{{data.harm_result}}</textarea>
  </div>
  <div class="mb-6 row">
    <label class="col-sm-12 col-form-label"  style="padding:15px 15px;">7.该危害的风险科目类别是什么(   )。</label>
    <div class="form-check form-check-inline" id="check_box_17"  style="padding:15px 15px;">
        <input class="form-check-input" type="radio" name="inlineRadioOptions_4" id="inlineRadio17_1" value="I" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio17_1">A. I</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_4" id="inlineRadio17_2" value="II" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio17_2">B. II</label>
        <hr/>
        <input class="form-check-input" type="radio" name="inlineRadioOptions_4" id="inlineRadio17_3" value="III" style="margin-left:0px;zoom:130%;">
        <label class="form-check-label" for="inlineRadio17_3">C. III</label>
    </div>
  </div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea5" class="form-label" style="padding:15px 15px;">8.该危害的缓解措施是什么？</label>
    <textarea class="form-control" id="exampleFormControlTextarea3" rows="3" style="margin:15px 15px;" disabled>{{data.measure1}}</textarea>
  </div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea4" class="form-label" style="padding:15px 15px;">9.该危害的应急处置措施是什么？</label>
    <textarea class="form-control" id="exampleFormControlTextarea4" rows="3" style="margin:15px 15px;" disabled>{{data.measure2}}</textarea>
  </div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea5" class="form-label" style="padding:15px 15px;">10.该危害的剩余危害评分是多少？</label>
    <textarea class="form-control" id="exampleFormControlTextarea5" rows="3" style="margin:15px 15px;" disabled>{{data.left_harm_score}}</textarea>
  </div>
  <div class="mb-3 row">
    <label for="exampleFormControlTextarea6" class="form-label" style="padding:15px 15px;">11.该危害的剩余危害等级是多少？</label>
    <textarea class="form-control" id="exampleFormControlTextarea6" rows="3" style="margin:15px 15px;" disabled>{{data.left_harm_level}}</textarea>
  </div>
    <div class="mb-3 row">
        <div class="col-sm-9">
            <a href="/static/file/MP154K002 安全风险管理程序-1.pdf" title="MP154K002 安全风险管理程序-1" target="_blank" style="margin-left:15px;color: #0a53be;text-decoration:underline;">注意事项</a>
        </div>
    </div></div>


{% endblock %}


{% block my_script %}
<script>
    function submit_data(){
    var data = new Array();
    var obj = document.getElementsByName('inlineRadioOptions_0');
    for(i=0;i<obj.length;i++){
      if(obj[i].checked){
          data.push({check0:obj[i].value})
      }
    };
    var obj = document.getElementsByName('inlineRadioOptions_1');
    for(i=0;i<obj.length;i++){
      if(obj[i].checked){
          data.push({check1:obj[i].value})
      }
    };
    var obj = document.getElementsByName('inlineRadioOptions_2');
    for(i=0;i<obj.length;i++){
      if(obj[i].checked){
          data.push({check2:obj[i].value})
      }
    };
    var obj = document.getElementsByName('inlineRadioOptions_3');
    for(i=0;i<obj.length;i++){
      if(obj[i].checked){
          data.push({check3:obj[i].value})
      }
    };
    data.push({text1:$('#exampleFormControlTextarea1').val()});
    data.push({text2:$('#exampleFormControlTextarea2').val()});
    data.push({text3:$('#exampleFormControlTextarea3').val()});
    data.push({text4:$('#exampleFormControlTextarea4').val()});
    data.push({text5:$('#exampleFormControlTextarea5').val()});
    data.push({text6:$('#exampleFormControlTextarea6').val()});
    data.push({yinsu1:$('#yinsu1').val()});
    data.push({yinsu2:$('#yinsu2').val()});
    data.push({yinsu3:$('#yinsu3').val()});
    data.push({yinsu4:$('#yinsu4').val()});
<!--    data.push({liucheng:'{{liucheng}}'});-->
    data.push({R_score:$('#R_score').text()});
    data.push({R_level:$('#R_level').text()});
    data.push({status:'提交'});
    data.push({id:'{{id}}'});
    console.log(data);
    data_post = {data:data};
        $.ajax({
                type:'POST',
                url:'/weixianyuan_initial/add/',
                data:JSON.stringify(data_post),
                contentType:'application/json',
                success:function (data) {
                    alert(data.msg);
                    },
                error:function () {alert("提交失败！")},
        });
    }

    function save_data(){
        var data = new Array();
        var obj = document.getElementsByName('inlineRadioOptions_0');
        for(i=0;i<obj.length;i++){
          if(obj[i].checked){
              data.push({check0:obj[i].value})
          }
        };
        var obj = document.getElementsByName('inlineRadioOptions_1');
        for(i=0;i<obj.length;i++){
          if(obj[i].checked){
              data.push({check1:obj[i].value})
          }
        };
        var obj = document.getElementsByName('inlineRadioOptions_2');
        for(i=0;i<obj.length;i++){
          if(obj[i].checked){
              data.push({check2:obj[i].value})
          }
        };
        var obj = document.getElementsByName('inlineRadioOptions_3');
        for(i=0;i<obj.length;i++){
          if(obj[i].checked){
              data.push({check3:obj[i].value})
          }
        };
        data.push({text1:$('#exampleFormControlTextarea1').val()});
        data.push({text2:$('#exampleFormControlTextarea2').val()});
        data.push({text3:$('#exampleFormControlTextarea3').val()});
        data.push({text4:$('#exampleFormControlTextarea4').val()});
        data.push({text5:$('#exampleFormControlTextarea5').val()});
        data.push({text6:$('#exampleFormControlTextarea6').val()});
        data.push({yinsu1:$('#yinsu1').val()});
        data.push({yinsu2:$('#yinsu2').val()});
        data.push({yinsu3:$('#yinsu3').val()});
        data.push({yinsu4:$('#yinsu4').val()});
        data.push({text3:$('#exampleFormControlTextarea3').val()});
<!--        data.push({liucheng:'{{liucheng}}'});-->
        data.push({R_score:$('#R_score').text()});
        data.push({R_level:$('#R_level').text()});
        data.push({status:'保存'});
        data.push({id:'{{id}}'});
        console.log(data);
        data_post = {data:data};
            $.ajax({
                    type:'POST',
                    url:'/weixianyuan_initial/add/',
                    data:JSON.stringify(data_post),
                    contentType:'application/json',
                    success:function (data) {
                        alert(data.msg);
                        },
                    error:function () {alert("提交失败！")},
            });
    }
</script>
<script>
document.getElementById("check_box_7").addEventListener("click", function(e) {
    document.getElementById("check_box_8").addEventListener("click", function(f) {
        if (e.target.tagName == "INPUT") {
            if (f.target.tagName == "INPUT") {
                var choose1 = '';
                var choose2 = '';
                var obj = document.getElementsByName('inlineRadioOptions_2');
                for(i=0;i<obj.length;i++){if(obj[i].checked){ choose1 = obj[i].value}};
                var obj = document.getElementsByName('inlineRadioOptions_3');
                for(i=0;i<obj.length;i++){if(obj[i].checked){ choose2 = obj[i].value}};
                $('#R_score').text(choose1+choose2);
                if(choose1=='1'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='B'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='C'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='D'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='E'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='B'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='C'){$('#R_level').text('中');};
                if(choose1=='2'&&choose2=='D'){$('#R_level').text('中');};
                if(choose1=='2'&&choose2=='E'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='3'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='C'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='D'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='E'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='4'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='4'&&choose2=='C'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='D'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='E'){$('#R_level').text('高');};
                if(choose1=='5'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='5'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='5'&&choose2=='C'){$('#R_level').text('高');};
                if(choose1=='5'&&choose2=='D'){$('#R_level').text('避免');};
                if(choose1=='5'&&choose2=='E'){$('#R_level').text('避免');};
            }
        }
    })
})
document.getElementById("check_box_8").addEventListener("click", function(e) {
    document.getElementById("check_box_7").addEventListener("click", function(f) {
        if (e.target.tagName == "INPUT") {
            if (f.target.tagName == "INPUT") {
                var choose1 = '';
                var choose2 = '';
                var obj = document.getElementsByName('inlineRadioOptions_2');
                for(i=0;i<obj.length;i++){if(obj[i].checked){ choose1 = obj[i].value}};
                var obj = document.getElementsByName('inlineRadioOptions_3');
                for(i=0;i<obj.length;i++){if(obj[i].checked){ choose2 = obj[i].value}};
                $('#R_score').text(choose1+choose2);
                if(choose1=='1'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='B'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='C'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='D'){$('#R_level').text('低');};
                if(choose1=='1'&&choose2=='E'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='B'){$('#R_level').text('低');};
                if(choose1=='2'&&choose2=='C'){$('#R_level').text('中');};
                if(choose1=='2'&&choose2=='D'){$('#R_level').text('中');};
                if(choose1=='2'&&choose2=='E'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='3'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='C'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='D'){$('#R_level').text('中');};
                if(choose1=='3'&&choose2=='E'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='4'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='4'&&choose2=='C'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='D'){$('#R_level').text('高');};
                if(choose1=='4'&&choose2=='E'){$('#R_level').text('高');};
                if(choose1=='5'&&choose2=='A'){$('#R_level').text('低');};
                if(choose1=='5'&&choose2=='B'){$('#R_level').text('中');};
                if(choose1=='5'&&choose2=='C'){$('#R_level').text('高');};
                if(choose1=='5'&&choose2=='D'){$('#R_level').text('避免');};
                if(choose1=='5'&&choose2=='E'){$('#R_level').text('避免');};
            }
        }
    })
})
</script>
<script>
    var obj = document.getElementsByName('inlineRadioOptions_0');
    for(i=0;i<obj.length;i++){
        if(obj[i].value=='{{data.plane_type}}'){
            obj[i].checked='True';
        };
        obj[i].disabled='True';
    };
    var obj = document.getElementsByName('inlineRadioOptions_2');
    for(i=0;i<obj.length;i++){
        if(obj[i].value=='{{data.probability}}'){
            obj[i].checked='True';
        };
        obj[i].disabled='True';
    };
    var obj = document.getElementsByName('inlineRadioOptions_3');
    for(i=0;i<obj.length;i++){
        if(obj[i].value=='{{data.seriousness}}'){
            obj[i].checked='True';
        };
        obj[i].disabled='True';
    };
    var obj = document.getElementsByName('inlineRadioOptions_4');
    for(i=0;i<obj.length;i++){
        if(obj[i].value=='{{data.subject_type}}'){
            obj[i].checked='True';
        };
        obj[i].disabled='True';
    };
</script>
{% endblock %}